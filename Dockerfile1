FROM eabatalov/aucont16-test-base
MAINTAINER Roman Vasilev

USER root

# RUN echo 111 | sudo -S apt-get update
# RUN echo 111 | sudo -S apt-get install -y g++
# RUN echo 111 | sudo -S apt-get install -y cmake

RUN apt-get update
RUN apt-get install -y g++

COPY task_stuff/rootfs /test/rootfs
COPY task_stuff/scripts /test/scripts
COPY tools /test/aucont

# RUN echo 111 | sudo -S chown -R dev:dev /test/rootfs
# RUN echo 111 | sudo -S chown -R dev:dev /test/scripts
# RUN echo 111 | sudo -S chown -R dev:dev /test/aucont

# RUN echo 111 | sudo -S chmod -R 700 /test/rootfs
# RUN echo 111 | sudo -S chmod -R 700 /test/scripts
# RUN echo 111 | sudo -S chmod -R 700 /test/aucont


# RUN cd /test/aucont && cmake .
RUN cd /test/aucont && make